{% extends 'cpanel/main.html' %}
{% block content %}
{% load method %}
      

   

    <div id="content mt-10">
        <div class="">
           
          
            <div class="clearfix mt-10">
                <div class="col-lg-12 ">
                    <div class="card">
                        <div class="header">
                            <h2>Table Filter</h2>
                        </div>
                        <div class="body">
                            <!-- <button type="button" class="btn mb-1 btn-simple btn-sm btn-default btn-filter" data-target="all">Todos</button>
                            <button type="button" class="btn mb-1 btn-simple btn-sm btn-success btn-filter" data-target="approved">Approved</button>
                            <button type="button" class="btn mb-1 btn-simple btn-sm btn-warning btn-filter" data-target="suspended">Suspended</button>
                            <button type="button" class="btn mb-1 btn-simple btn-sm btn-info btn-filter" data-target="pending">Pending</button>
                            <button type="button" class="btn mb-1 btn-simple btn-sm btn-danger btn-filter" data-target="blocked">Blocked</button> -->
                            <form id="monthForm" method="post">
                                {% csrf_token %}
                                <label for="start">Month:</label>
                                <input required type="month" onchange="submitMonthForm()" id="month" name="month" value="{{ month }}">
                                <!-- <input type="submit" value="Submit" /> -->
                            </form>
                            <script>
                                function submitMonthForm()
                                {
                                    document.getElementById("monthForm").submit();
                                }
                            </script>
                            <div class="table-responsive m-t-20">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>
                                                Monday
                                            </th>
                                            <th>
                                                Tuesday
                                            </th>
                                            <th>
                                                Wendesday
                                            </th>
                                            <th>
                                                Thursday
                                            </th>
                                            <th>
                                                Friday
                                            </th>
                                            <th>
                                                Saturday
                                            </th>
                                            <th>
                                                Sunday
                                            </th>
                                            <th>
                                                Total
                                            </th>
                                        </tr>
                                    </thead>                             
                                    <tbody>
                                        
                                        {% for week in data %}
                                           <tr data-status="approved">
                                                {% for day, time in week.items %}
                                                
                                                    {% if time == '0' %}
                                                        <td></td>
                                                    {% elif day == 'Total' %}
                                                        <td class="text-center">
                                                            <p class="text-secondary h2"> {{ time }} </p>
                                                        </td>
                                                    {% else %}
                                                        
                                                            <td class="btn-{% call_method user 'today_time_color' time %} btn-circle text-white">
                                                                <a href="{% url 'cpanel-detections' %}/{{user.id}}/{{month}}-{{day}}">
                                                                    <p class="text-white h1"> {{ day }} </p>
                                                                    <p class="text-light">{{ time }}</p>
                                                                </a>
                                                            </td>
                                                        
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    
    {% endblock content %}